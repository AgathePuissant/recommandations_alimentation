# -*- coding: utf-8 -*-
"""
Created on Mon Feb  3 08:04:09 2020

@author: lili-
"""

"""
===============================================================================

* Step 2 : Python
    Analyse de la table
    Définition des différents catégories d'individus
    Analyse de ces catégories pour voir si elles ont un sens
    => livrables : une table avec les variables caractérisant la catégorie
    
===============================================================================
"""
import math as math
import numpy as np

def get_new_row(nouveau_client, modalites):
    n = len(modalites)
    new_row = []
    for i in range(n) :
        l = [0 for j in range(modalites[i])]
        l[nouveau_client[i]] = 1
        new_row += l
    return(new_row)

modalites = [3,8,3,2,2,2,2,2,2,2]
new_client = [2,4,2,1,0,1,1,1,0,0]
nr = get_new_row(new_client, modalites)


def associer_cluster(cluster_data, new_row) :
    liste = []
    dim = cluster_data.shape
    for i in range(dim[1]):
        x = new_row - cluster_data[:,i]
        liste+=[math.sqrt(sum(abs(x)))]
        minim = min(liste)
    return (liste.index(minim)+1)

cluster_data =  np.array([[0.09009009, 0.34134008, 0.11825193, 0.        , 0.14718615,
        0.88343558, 0.25882353, 0.76694915, 0.80523256, 0.74796748],
       [0.38574939, 0.26295828, 0.08997429, 0.91764706, 0.33766234,
        0.04703476, 0.44705882, 0.08474576, 0.15116279, 0.01626016],
       [0.52416052, 0.39570164, 0.79177378, 0.08235294, 0.51515152,
        0.06952965, 0.29411765, 0.14830508, 0.04360465, 0.23577236],
       [0.01801802, 0.10619469, 0.01799486, 0.        , 0.03030303,
        0.59304703, 0.14117647, 0.32627119, 0.0755814 , 0.39837398],
       [0.04095004, 0.12642225, 0.06683805, 0.        , 0.04761905,
        0.15746421, 0.05882353, 0.28389831, 0.28488372, 0.17886179],
       [0.02620803, 0.10745891, 0.02827763, 0.        , 0.06926407,
        0.13292434, 0.05882353, 0.15677966, 0.44476744, 0.17073171],
       [0.03767404, 0.13906448, 0.10282776, 0.08235294, 0.05194805,
        0.00204499, 0.07058824, 0.08474576, 0.01744186, 0.01626016],
       [0.11302211, 0.17193426, 0.15938303, 0.09411765, 0.14285714,
        0.05112474, 0.07058824, 0.02118644, 0.02616279, 0.01626016],
       [0.31367731, 0.18710493, 0.27249357, 0.14117647, 0.30735931,
        0.01840491, 0.41176471, 0.1059322 , 0.07267442, 0.08943089],
       [0.2997543 , 0.11378003, 0.24678663, 0.50588235, 0.23376623,
        0.03680982, 0.12941176, 0.01694915, 0.05232558, 0.05691057],
       [0.15069615, 0.04804046, 0.10539846, 0.17647059, 0.11688312,
        0.00817996, 0.05882353, 0.00423729, 0.02616279, 0.07317073],
       [0.05569206, 0.21112516, 0.10796915, 0.00588235, 0.11255411,
        0.66257669, 0.27058824, 0.41101695, 0.20348837, 0.6097561 ],
       [0.54217854, 0.45132743, 0.71465296, 0.37647059, 0.4978355 ,
        0.28834356, 0.08235294, 0.5720339 , 0.76453488, 0.10569106],
       [0.4021294 , 0.33754741, 0.17737789, 0.61764706, 0.38961039,
        0.04907975, 0.64705882, 0.01694915, 0.03197674, 0.28455285],
       [0.39230139, 0.58533502, 0.64267352, 0.19411765, 0.11688312,
        0.53374233, 0.43529412, 0.6440678 , 0.81104651, 0.5203252 ],
       [0.60769861, 0.41466498, 0.35732648, 0.80588235, 0.88311688,
        0.46625767, 0.56470588, 0.3559322 , 0.18895349, 0.4796748 ],
       [0.20884521, 0.89506953, 0.3033419 , 0.18823529, 0.54978355,
        0.69120654, 0.96470588, 0.55508475, 0.59011628, 0.38211382],
       [0.79115479, 0.10493047, 0.6966581 , 0.81176471, 0.45021645,
        0.30879346, 0.03529412, 0.44491525, 0.40988372, 0.61788618],
       [0.12530713, 0.92541087, 0.65552699, 0.61764706, 0.01731602,
        0.8793456 , 0.16470588, 0.51271186, 0.56395349, 0.31707317],
       [0.87469287, 0.07458913, 0.34447301, 0.38235294, 0.98268398,
        0.1206544 , 0.83529412, 0.48728814, 0.43604651, 0.68292683],
       [0.37674038, 0.85335019, 0.32390746, 0.6       , 0.45454545,
        0.54601227, 0.56470588, 0.26271186, 0.78197674, 0.02439024],
       [0.62325962, 0.14664981, 0.67609254, 0.4       , 0.54545455,
        0.45398773, 0.43529412, 0.73728814, 0.21802326, 0.97560976],
       [0.34398034, 0.63211125, 0.67095116, 0.52352941, 0.63636364,
        0.2208589 , 0.22352941, 0.6779661 , 0.8372093 , 0.42276423],
       [0.65601966, 0.36788875, 0.32904884, 0.47647059, 0.36363636,
        0.7791411 , 0.77647059, 0.3220339 , 0.1627907 , 0.57723577],
       [0.30712531, 0.43742099, 0.8714653 , 0.64117647, 0.77056277,
        0.77505112, 0.12941176, 0.04661017, 0.68023256, 0.97560976],
       [0.69287469, 0.56257901, 0.1285347 , 0.35882353, 0.22943723,
        0.22494888, 0.87058824, 0.95338983, 0.31976744, 0.02439024],
       [0.32186732, 0.46776233, 0.85347044, 0.07647059, 0.86147186,
        0.68711656, 0.94117647, 0.70338983, 0.35755814, 0.28455285],
       [0.67813268, 0.53223767, 0.14652956, 0.92352941, 0.13852814,
        0.31288344, 0.05882353, 0.29661017, 0.64244186, 0.71544715]])

associer_cluster(cluster_data, nr) 
